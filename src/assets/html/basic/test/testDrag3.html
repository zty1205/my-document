<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>finish</title>
    <style>
        body{
            margin:0;
            position: relative;
        }
        .box {
            width: 120px;
            height: 80px;
            text-align: center;
            margin: 10px 10px;
            position: absolute;
            background: red;
        }
    </style>
</head>
<body>
    <!-- <div id="drag-box" class="box" draggable="true">
        可拖动
    </div> -->
    <div id="drag-box2" class="box" draggable="true">
        可拖动
    </div>
<script>

    function toNumber(str, s) {
        return Number(str.replace(s, ''))
    }
    // div 自身的偏移量 + 鼠标的移动量
    window.onload = function() {
        var p3 = document.querySelector(".box")
        var startX;
        var startY;
        var startMouseX;
        var startMouseY;
        var endMouseX;
        var endMouseY;
        p3.ondragstart=function(e){
            startX = p3.style.left ? toNumber(p3.style.left, 'px') : 0
            startY = p3.style.top ? toNumber(p3.style.top, 'px') : 0
            startMouseX = e.pageX
            startMouseY = e.pageY
        }
        p3.ondragend=function(e){
            endMouseX= e.pageX;
            endMouseY= e.pageY;
            p3.style.left= ( startX + (endMouseX - startMouseX) ) + 'px'
            p3.style.top= ( startY + (endMouseY - startMouseY) ) +'px';
        }
    }

</script>
</body>
</html>
